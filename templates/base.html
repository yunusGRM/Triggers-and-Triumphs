<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Triggers & Triumphs — AI Deck</title>

  <!-- Meta -->
  <meta name="description" content="Darkly comedic, empathetic AI cards for Triggers & Triumphs." />
  <meta name="theme-color" content="#0b0b0b" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', 'Segoe UI', 'Helvetica', 'Arial', 'sans-serif'],
            serif: ['"Playfair Display"', 'Georgia', 'serif'],
            mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'monospace']
          },
          colors: {
            ink:'#0B0B0B',
            cream:'#FFF8EA',
            fog:'#F4F1EA',
            moss:'#6A8C69',
            ochre:'#D6A04A',
            coral:'#EB6F6F',
            sky:'#83B5DC',
            plum:'#6E5A8C'
          },
          boxShadow:{
            glow:'0 10px 30px rgba(0,0,0,.18)',
            inner:'inset 0 1px 0 rgba(255,255,255,.25), inset 0 -6px 20px rgba(0,0,0,.06)'
          },
          borderRadius:{ xl2:'1.25rem' },
          backdropBlur:{ xs:'2px' },
          animation:{
            float:'float 6s ease-in-out infinite',
            pulseSoft:'pulseSoft 8s ease-in-out infinite'
          },
          keyframes:{
            float:{ '0%,100%':{transform:'translateY(0)'}, '50%':{transform:'translateY(-6px)'} },
            pulseSoft:{
              '0%,100%':{opacity:.75},
              '50%':{opacity:1}
            }
          }
        }
      }
    }
  </script>

  <style>
    /* Layered gradient background with texture */
    body{
      background:
        radial-gradient(1200px 700px at 10% -10%, #FFEFD2 10%, transparent 60%),
        radial-gradient(900px 600px at 110% 10%, #E8E4FF 6%, transparent 50%),
        linear-gradient(180deg, #FFFDF8 0%, #F4F1EA 100%);
      min-height: 100vh;
    }
    .glass {
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .grain:before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 128 128'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.035'/%3E%3C/svg%3E");
    }
  </style>
</head>

<body class="text-ink grain">
  <!-- Header -->
  <header class="sticky top-0 z-40">
    <div class="glass border-b border-zinc-200/70">
      <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-xl bg-ink text-white grid place-items-center shadow-glow animate-float">
            <!-- minimal logo -->
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.6"/>
              <path d="M8 9h8M8 12h6M8 15h4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          </div>
          <a href="/" class="font-semibold">Triggers &amp; Triumphs — AI Deck</a>
        </div>
        <nav class="text-sm flex items-center gap-4">
          {% if session.get('email') %}
            <span class="hidden sm:inline text-zinc-600">Signed in as {{ session['email'] }}</span>
            <a href="/logout" class="underline decoration-dotted underline-offset-4">Logout</a>
          {% else %}
            <a href="/login" class="underline decoration-dotted underline-offset-4">Sign in</a>
          {% endif %}
          <a href="/" class="underline decoration-dotted underline-offset-4">Home</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Page -->
  <main class="max-w-5xl mx-auto px-4 py-8 md:py-12">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="space-y-2 mb-6">
          {% for category, msg in messages %}
            <div class="p-3 rounded-xl border shadow-inner glass
                        {% if category == 'success' %}border-green-300 bg-green-50/70
                        {% else %}border-rose-300 bg-rose-50/70{% endif %}">
              <p class="text-sm">{{ msg }}</p>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <footer class="py-10">
    <p class="text-center text-xs text-zinc-500">© {{ 2025 }} Triggers &amp; Triumphs</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
</body>
</html>
